<html xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:mso="urn:schemas-microsoft-com:office:office" xmlns:msdt="uuid:C2F41010-65B3-11d1-A29F-00AA00C14882">
  <head>
    <META http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>PatientMessageView View
				</title>
    <link href="help.css" type="text/css" rel="stylesheet"><script language="javascript" src="help.js" type="text/javascript"></script>
<!--[if gte mso 9]><xml>
<mso:CustomDocumentProperties>
<mso:_dlc_DocId msdt:dt="string">6UD7KFKCWNQF-239221588-2139</mso:_dlc_DocId>
<mso:_dlc_DocIdItemGuid msdt:dt="string">a52c55b6-80d3-4af4-923c-40fe85730504</mso:_dlc_DocIdItemGuid>
<mso:_dlc_DocIdUrl msdt:dt="string">https://sp.choa.org/departments/finance/analytics/_layouts/15/DocIdRedir.aspx?ID=6UD7KFKCWNQF-239221588-2139, 6UD7KFKCWNQF-239221588-2139</mso:_dlc_DocIdUrl>
</mso:CustomDocumentProperties>
</xml><![endif]-->
</head>
  <body topmargin="0" id="bodyID" class="dtBODY"><script language="javascript">
			var myStandardHeader = new StandardHeader(true);
		
					myStandardHeader.AddNavigationItem("Patient Classification System Documentation", "default.html");
					myStandardHeader.AddNavigationItem("Views","viewlist.html");
					myStandardHeader.AddNavigationItem("PatientMessageView");
					myStandardHeader.Write();
				</script><p>
      <font size="5"><b>PatientMessageView</b></font><br></p><br><br><p>create view PatientMessageView as
SELECT
[PatientMessage].PatientMessageID,
CONVERT(VARCHAR(max), DecryptByKeyAutoCert(CERT_ID('PatientEncryptionCertificate'), NULL, [PatientMessage].[Body])) Body,
[PatientMessage]. PatientMessageClassificationCode,
[PatientMessage].MessageControlIdentifier,
[PatientMessage].PatientID,
[PatientMessage].[SendingApplication],
CONVERT(VARCHAR(32), DecryptByKeyAutoCert(CERT_ID('PatientEncryptionCertificate'), NULL, [PatientMessage].[SendingFacillity])) SendingFacillity,
[PatientMessage].WhenCreated
FROM dbo.PatientMessage 
				</p><br><br><script language="javascript">
					var myStandardFooter = new StandardFooter();
					myStandardFooter.Write();
				</script></body>
</html>